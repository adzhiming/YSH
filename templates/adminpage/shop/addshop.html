 <{extends file="<{$tempdir}>/public/admin.html"}> 
   <{block name=extendjs}>
<script type="text/javascript" language="javascript" src="<{$siteurl}>/templates/<{$tempdir}>/public/js/artdialog/plugins/iframeTools.js"></script>
 <{/block}>
 <{block name=controlname}><span style="color:#ffffff;      font-size: 16px;   padding: 7px 10px;cursor:pointer;background: #ec7501;"><a style="color:#fff;" href="<{ofunc type=url link="/adminpage/shop/module/addshop"}>">单个添加店铺</a></span>   
 <span style="  cursor:pointer;margin-left:40px;"><a href="<{ofunc type=url link="/adminpage/shop/module/moreaddshop"}>">批量添加店铺</a></span><{/block}>
 <{block name=bodylist}> 
   <div style="width:98%;overflow-y:auto;white-space:nowrap;">  
      	
          <div class="tags"> 
           
          <div id="tagscontent">
            <form method="post" name="form1" action="<{ofunc type=url link="/adminpage/shop/module/saveshop/datatype/json"}>" onsubmit="return subform('<{ofunc type=url link="/adminpage/shop/module/adminshopwati"}>',this);">
              <div>
                <table border="0" cellspacing="2" cellpadding="4" class="list" name="table" id="table" width="100%">
                  <tbody>
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">&nbsp;</td>
                      <td>已存在会员新建店铺到此用户下</td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">店铺名称</td>
                      <td><input type="text" name="shopname" id="shopname" value="" class="skey" style="width:150px;" ></td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">会员名称</td>
                      <td><input type="text" name="username" id="username" value="" class="skey" style="width:150px;" ></td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">店铺类型</td>
                      <td><select name="shoptype">
                 	<{foreach from=$catlist item=itv}>
													<option value="<{$itv['cattype']}>_<{$itv['id']}>"  ><{$catarr[$itv['cattype']]}>-<{$itv['name']}></option>
													<{/foreach}>
							
                      </select>
                      	</td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">所属城市</td>
                        <td>
                         <select name="province" id="province">
                      	       <option value="0">请选择所属省</option>
                      	                	
                         </select>
                         <select name="city" id="city">
                      	       <option value="0">请选择所属市</option>
                         </select>
                         <select name="county" id="county">
                      	       <option value="0">请选择所属区</option>
                         </select>
                      	</td>
                    </tr> 
                  
                  </tbody>
                </table>
              </div>
              <div class="blank20"></div> 
              <input type="hidden" name="subtype" value="1">
               <input type="submit" value="确认提交" class="button">  
            </form>
          </div>
          <div id="tagscontent">
            <form method="post" name="form1" action="<{ofunc type=url link="/adminpage/shop/module/saveshop/datatype/json"}>" onsubmit="return subform('<{ofunc type=url link="/adminpage/shop/module/adminshoplist"}>',this);">
              <div>
                <table border="0" cellspacing="2" cellpadding="4" class="list" name="table" id="table" width="100%">
                  <tbody>
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">&nbsp;</td>
                      <td>直接创建会员和店铺</td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">店铺名称</td>
                      <td><input type="text" name="shopname" id="shopname" value="" class="skey" style="width:150px;" ></td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">会员名称</td>
                      <td><input type="text" name="username" id="username" value="" class="skey" style="width:150px;" ></td>
                    </tr> 
                   <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">会员邮箱</td>
                      <td><input type="text" name="email" id="email" value="" class="skey" style="width:150px;" ></td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">联系电话</td>
                      <td><input type="text" name="maphone" id="maphone" value="" class="skey" style="width:150px;" ></td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">登陆密码</td>
                      <td><input type="text" name="password" id="password" value="" class="skey" style="width:150px;" ></td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">确认密码</td>
                      <td><input type="text" name="password2" id="password2" value="" class="skey" style="width:150px;" ></td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">店铺类型</td>
                      <td><select name="shoptype">
                    
												<{foreach from=$catlist item=itv}>
													<option value="<{$itv['cattype']}>_<{$itv['id']}>"   ><{$catarr[$itv['cattype']]}>-<{$itv['name']}></option>
													<{/foreach}>
						
                      </select>
                      	</td>
                    </tr> 
                    <tr onmouseover="this.bgColor='#F5F5F5';" onmouseout="this.bgColor='ffffff';" bgcolor="ffffff">
                      <td class="left">所属城市</td>
                       <td>
                         <select name="province2" id="province2">
                      	       <option value="0">请选择所属省</option>
                      	                	
                         </select>
                         <select name="city2" id="city2">
                      	       <option value="0">请选择所属市</option>
                         </select>
                         <select name="county2" id="county2">
                      	       <option value="0">请选择所属区</option>
                         </select>
                      	</td>
                    </tr> 
                  </tbody>
                </table>
              </div>
              <div class="blank20"></div> 
               <input type="hidden" name="subtype" value="2">
               <input type="submit" value="确认提交" class="button">  
            </form>
          </div>
        </div>
        <div class="blank20"></div> 
      
      </div>
      <div class="clear"></div>
    </div>
    <div class="clear"></div>


 </div> 
 <script language="javascript" type="text/javascript"> 

// JavaScript Document
$(document).ready(function(e){

    
  //当省选中的话市也会跟着变去也会变。市和区都会加载一遍
  FillSheng();//省
  FillShi();//市
  FillQu();//区
  //给省加点击事件
  $("#province").change(function(){
      FillShi();//市
      FillQu();//区
    })
  //给市加点击事件
  $("#city").change(function(){
      FillQu();//区
   })
   
   //给省加点击事件
  $("#province2").change(function(){
      FillShi();//市
      FillQu();//区
    })
  //给市加点击事件
  $("#city2").change(function(){
      FillQu();//区
   })
});
//做三个方法分别为省市区
//填充省的方法，如何在表里查询 出省的代号例如：北京0001、天津0001,中国下面所有省都是0001开头的
function FillSheng()
{
  var pid = "100000";
  $.ajax({
    async:false,
    url: '<{ofunc type=url link="/adminpage/area/module/getareainfo/datatype/json"}>',
    data:{pid:pid},
    type:"POST",
    dataType:"TEXT",
    success: function(data){
    	 var obj = JSON.parse(data); 
    	 var areainfo = obj.msg.areainfo
      //返回数据,根据行于行之间的分隔符来拆,拆完之后会返回一数组/行的数组
      var str = "<option value='' >请选择地区</option>";
      //把行的数组遍历下用for循环...length长度
      for(var i=0;i<areainfo.length;i++)
      {
        str += "<option value='"+areainfo[i]['id']+"' data-id='"+areainfo[i]['id']+"'>"+areainfo[i]['shortname']+"</option>";
         
        $("#province").html(str);
        $("#province2").html(str);
      }
    }
  });
}
//填充市的方法
function FillShi()
{
  var pid =$ ("#province").find ("option:selected").attr ("data-id");
  $.ajax({
    async:false,//****
    url: '<{ofunc type=url link="/adminpage/area/module/getareainfo/datatype/json"}>',
    data:{pid:pid},
    type:"POST",
    dataType:"TEXT",
    success: function(data){
   	 var obj = JSON.parse(data); 
   	 var areainfo = obj.msg.areainfo
     //返回数据,根据行于行之间的分隔符来拆,拆完之后会返回一数组/行的数组
     var str = "<option value='' >请选择市</option>";
     //把行的数组遍历下用for循环...length长度
     for(var i=0;i<areainfo.length;i++)
     {
       str += "<option value='"+areainfo[i]['id']+"' data-id='"+areainfo[i]['id']+"'>"+areainfo[i]['shortname']+"</option>";
        
       $("#city").html(str);
     }
   }
  });
  
  var pid = $ ("#province2").find ("option:selected").attr ("data-id");
  $.ajax({
    async:false,//****
    url: '<{ofunc type=url link="/adminpage/area/module/getareainfo/datatype/json"}>',
    data:{pid:pid},
    type:"POST",
    dataType:"TEXT",
    success: function(data){
   	 var obj = JSON.parse(data); 
   	 var areainfo = obj.msg.areainfo
     //返回数据,根据行于行之间的分隔符来拆,拆完之后会返回一数组/行的数组
     var str = "<option value='' >请选择市</option>";
     //把行的数组遍历下用for循环...length长度
     for(var i=0;i<areainfo.length;i++)
     {
       str += "<option value='"+areainfo[i]['id']+"' data-id='"+areainfo[i]['id']+"'>"+areainfo[i]['shortname']+"</option>";
        
       $("#city2").html(str);
     }
   }
  });
}
//填充区的方法
function FillQu()
{
  var pid = $ ("#city").find ("option:selected").attr ("data-id");
  $.ajax({
    async:false,
    url: '<{ofunc type=url link="/adminpage/area/module/getareainfo/datatype/json"}>',
    data:{pid:pid},
    type:"POST",
    dataType:"TEXT",
    success: function(data){
      	 var obj = JSON.parse(data); 
      	 var areainfo = obj.msg.areainfo
        //返回数据,根据行于行之间的分隔符来拆,拆完之后会返回一数组/行的数组
        var str = "<option value='' >请选择市</option>";
        //把行的数组遍历下用for循环...length长度
        for(var i=0;i<areainfo.length;i++)
        {
          str += "<option value='"+areainfo[i]['id']+"' data-id='"+areainfo[i]['id']+"'>"+areainfo[i]['shortname']+"</option>";
           
          $("#county").html(str);
        }
      }
  });
  
  var pid = $ ("#city2").find ("option:selected").attr ("data-id");
  $.ajax({
    async:false,
    url: '<{ofunc type=url link="/adminpage/area/module/getareainfo/datatype/json"}>',
    data:{pid:pid},
    type:"POST",
    dataType:"TEXT",
    success: function(data){
      	 var obj = JSON.parse(data); 
      	 var areainfo = obj.msg.areainfo
        //返回数据,根据行于行之间的分隔符来拆,拆完之后会返回一数组/行的数组
        var str = "<option value='' >请选择市</option>";
        //把行的数组遍历下用for循环...length长度
        for(var i=0;i<areainfo.length;i++)
        {
          str += "<option value='"+areainfo[i]['id']+"' data-id='"+areainfo[i]['id']+"'>"+areainfo[i]['shortname']+"</option>";
           
          $("#county2").html(str);
        }
      }
  });
}
</script>  
<{/block}>



